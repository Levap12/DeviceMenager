# Device Manager - –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

Backend-—Å–µ—Ä–≤–µ—Ä –Ω–∞ Python + FastAPI + SQLite –¥–ª—è –ø—Ä–∏–µ–º–∞ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –æ—Ç Android-—É—Å—Ç—Ä–æ–π—Å—Ç–≤.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ü—Ä–∏–µ–º —Å–æ–±—ã—Ç–∏–π** –æ—Ç Android —É—Å—Ç—Ä–æ–π—Å—Ç–≤ (device_status, sms, boot_completed)
- **–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** –≤ SQLite –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- **REST API** –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö –∏ SMS
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** —Å –∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ–º –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
- **–ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞** –æ–Ω–ª–∞–π–Ω/–æ—Ñ—Ñ–ª–∞–π–Ω (< 20 –º–∏–Ω—É—Ç)
- **–ö—Ä–∞—Å–∏–≤—ã–π UI** –Ω–∞ Tailwind CSS –≤ —Ç–µ–º–Ω–æ–º —Å—Ç–∏–ª–µ

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.8+
- pip

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:
```bash
python main.py
```

–°–µ—Ä–≤–µ—Ä –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8000`

## üì° API Endpoints

### POST /event
–ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–±—ã—Ç–∏—è –æ—Ç —É—Å—Ç—Ä–æ–π—Å—Ç–≤

**–ü—Ä–∏–º–µ—Ä device_status:**
```json
{
  "type": "device_status",
  "timestamp": "14.10.2025 12:00:00",
  "device": {
    "name": "OnePlus GM1920",
    "id": "abd7b5e86a733e8c",
    "battery": 85
  },
  "network": {
    "hasSignal": true,
    "signalStrength": 3,
    "networkType": "4G (LTE) (Tele2)",
    "country": "KZ",
    "canReceiveSms": true
  },
  "internet": {
    "connected": true,
    "type": "WiFi"
  }
}
```

**–ü—Ä–∏–º–µ—Ä sms:**
```json
{
  "type": "sms",
  "timestamp": "14.10.2025 12:00:00",
  "from": "+77053161050",
  "message": "–ü—Ä–∏–≤–µ—Ç, –∫–∞–∫ –¥–µ–ª–∞?",
  "device": {
    "name": "OnePlus GM1920",
    "battery": 82,
    "hasSignal": true,
    "signalStrength": 3,
    "networkType": "4G (LTE)",
    "internetConnected": true
  }
}
```

**–ü—Ä–∏–º–µ—Ä boot_completed:**
```json
{
  "type": "boot_completed",
  "timestamp": "14.10.2025 12:00:00",
  "device": {
    "name": "OnePlus GM1920",
    "id": "abd7b5e86a733e8c",
    "battery": 78
  },
  "network": {
    "hasSignal": true,
    "signalStrength": 2,
    "networkType": "4G (LTE)",
    "canReceiveSms": true
  },
  "internet": {
    "connected": true,
    "type": "–ú–æ–±–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (4G)"
  }
}
```

### GET /devices
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

**–û—Ç–≤–µ—Ç:**
```json
{
  "status": "success",
  "count": 1,
  "devices": [
    {
      "id": "device_001",
      "name": "–ú–æ–π —Ç–µ–ª–µ—Ñ–æ–Ω",
      "battery": 85,
      "signal_strength": 75,
      "network_type": "4G",
      "internet": "WiFi",
      "last_seen": "2025-10-14T12:00:00",
      "online": true
    }
  ]
}
```

### GET /device/{id}
–ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ

### GET /device/{id}/sms
–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ SMS –¥–ª—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞

## üé® –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

- **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞** (`/`) - —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤
- **–°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞** (`/device-page/{id}`) - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –∏ SMS

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ UI:

- ‚úÖ –¶–≤–µ—Ç–æ–≤–∞—è –∏–Ω–¥–∏–∫–∞—Ü–∏—è –∑–∞—Ä—è–¥–∞ –±–∞—Ç–∞—Ä–µ–∏ (–∫—Ä–∞—Å–Ω—ã–π < 20%, –∂–µ–ª—Ç—ã–π 20-50%, –∑–µ–ª–µ–Ω—ã–π > 50%)
- ‚úÖ –°—Ç–∞—Ç—É—Å –æ–Ω–ª–∞–π–Ω/–æ—Ñ—Ñ–ª–∞–π–Ω —Å —Ü–≤–µ—Ç–Ω—ã–º–∏ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–∞–º–∏ üü¢üî¥
- ‚úÖ –ê–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥
- ‚úÖ –°–ø–∏–Ω–Ω–µ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
- ‚úÖ –¢–µ–º–Ω—ã–π –¥–∏–∑–∞–π–Ω —Å Tailwind CSS
- ‚úÖ –°–µ—Ä–∞—è –ø–æ–¥—Å–≤–µ—Ç–∫–∞ –æ—Ñ—Ñ–ª–∞–π–Ω —É—Å—Ç—Ä–æ–π—Å—Ç–≤

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### devices
- `id` (TEXT) - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `name` (TEXT) - –Ω–∞–∑–≤–∞–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `battery` (INTEGER) - —É—Ä–æ–≤–µ–Ω—å –∑–∞—Ä—è–¥–∞
- `signal_strength` (INTEGER) - —É—Ä–æ–≤–µ–Ω—å —Å–∏–≥–Ω–∞–ª–∞
- `network_type` (TEXT) - —Ç–∏–ø —Å–µ—Ç–∏
- `internet` (TEXT) - —Ç–∏–ø –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- `last_seen` (TEXT) - –≤—Ä–µ–º—è –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —Å–æ–±—ã—Ç–∏—è
- `online` (BOOLEAN) - —Å—Ç–∞—Ç—É—Å –æ–Ω–ª–∞–π–Ω/–æ—Ñ—Ñ–ª–∞–π–Ω

### events
- `id` (INTEGER) - –∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç
- `device_id` (TEXT) - ID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `type` (TEXT) - —Ç–∏–ø —Å–æ–±—ã—Ç–∏—è
- `timestamp` (TEXT) - –≤—Ä–µ–º—è —Å–æ–±—ã—Ç–∏—è
- `data` (TEXT) - JSON –¥–∞–Ω–Ω—ã–µ —Å–æ–±—ã—Ç–∏—è

### sms_logs
- `id` (INTEGER) - –∞–≤—Ç–æ–∏–Ω–∫—Ä–µ–º–µ–Ω—Ç
- `device_id` (TEXT) - ID —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- `timestamp` (TEXT) - –≤—Ä–µ–º—è –ø–æ–ª—É—á–µ–Ω–∏—è
- `sender` (TEXT) - –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å
- `message` (TEXT) - —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–∞–π–ª `test_api.py` –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö:

```bash
python test_api.py
```

–ò–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –∑–∞–ø—Ä–æ—Å –≤—Ä—É—á–Ω—É—é —Å –ø–æ–º–æ—â—å—é curl (Windows PowerShell):

```powershell
$body = @{
    type = "device_status"
    timestamp = "14.10.2025 12:00:00"
    device = @{
        name = "–¢–µ—Å—Ç–æ–≤–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ"
        id = "test_device_001"
        battery = 95
    }
    network = @{
        hasSignal = $true
        signalStrength = 3
        networkType = "4G (LTE)"
        country = "RU"
        canReceiveSms = $true
    }
    internet = @{
        connected = $true
        type = "WiFi"
    }
} | ConvertTo-Json

Invoke-RestMethod -Uri "http://localhost:8000/event" -Method POST -Body $body -ContentType "application/json"
```

–ò–ª–∏ —Å –ø–æ–º–æ—â—å—é curl (Linux/Mac):
```bash
curl -X POST http://localhost:8000/event \
  -H "Content-Type: application/json" \
  -d '{
    "type": "device_status",
    "timestamp": "14.10.2025 12:00:00",
    "device": {
      "name": "–¢–µ—Å—Ç–æ–≤–æ–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ",
      "id": "test_device_001",
      "battery": 95
    },
    "network": {
      "hasSignal": true,
      "signalStrength": 3,
      "networkType": "4G (LTE)",
      "country": "RU",
      "canReceiveSms": true
    },
    "internet": {
      "connected": true,
      "type": "WiFi"
    }
  }'
```

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
DeviceManager/
‚îú‚îÄ‚îÄ main.py              # FastAPI —Å–µ—Ä–≤–µ—Ä
‚îú‚îÄ‚îÄ database.py          # –†–∞–±–æ—Ç–∞ —Å SQLite
‚îú‚îÄ‚îÄ models.py            # Pydantic –º–æ–¥–µ–ª–∏
‚îú‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ index.html          # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
‚îú‚îÄ‚îÄ device.html         # –°—Ç—Ä–∞–Ω–∏—Ü–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
‚îú‚îÄ‚îÄ test_api.py         # –°–∫—Ä–∏–ø—Ç –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ devices.db          # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îî‚îÄ‚îÄ README.md           # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ
- –°—Ç–∞—Ç—É—Å "–æ–Ω–ª–∞–π–Ω" –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–ø–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ < 35 –º–∏–Ω—É—Ç)
- –í—Å–µ —Å–æ–±—ã—Ç–∏—è —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `events` –Ω–µ–∑–∞–≤–∏—Å–∏–º–æ –æ—Ç —Ç–∏–ø–∞
- –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

‚ö†Ô∏è –≠—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç. –î–ª—è production –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –¥–æ–±–∞–≤—å—Ç–µ:
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é –∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é
- HTTPS
- –í–∞–ª–∏–¥–∞—Ü–∏—é –∏ —Å–∞–Ω–∏—Ç–∏–∑–∞—Ü–∏—é –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- Rate limiting
- CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

–°–æ–∑–¥–∞–Ω–æ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º FastAPI, SQLite –∏ Tailwind CSS

